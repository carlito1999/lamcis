<!DOCTYPE html>
<html lang="el">
<head>
    <link rel="stylesheet" href="style.css">
    <link rel="script" href="lamcis.js">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Επικοινωνία - Lamcis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for social media icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
    <nav class="navbar sticky-top"> 
        <div class="nav-container">
            <a class="brand" href="lamcis.html">
                <img class="logo" src="media\lamcis-placeholder.png" alt="Logo">
            </a>
            <a href="lamcis.html" class="navbtn">Αρχική</a>
        </div>
    </nav>

    <section class="contact-section">
        <div class="section-container">
            <h2 class="section-title"> Επικοινωνήστε μαζί μας</h2>
            
            <div class="contact-grid">
                <div class="contact-box">
                    <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h3 class="contact-title">Email</h3>
                    <p>Στείλτε μας ένα μήνυμα και θα σας απαντήσουμε σύντομα!</p>
                    <a href="mailto:info@lamcis.gr" class="contact-link">
                        <i class="fas fa-envelope"></i> info@lamcis.gr
                    </a>
                </div>

                <div class="contact-box">
                    <div class="contact-icon">
                        <i class="fab fa-instagram"></i>
                    </div>
                    <h3 class="contact-title">Instagram</h3>
                    <p>Ακολουθήστε μας για να δείτε τις τελευταίες δημιουργίες μας!</p>
                    <a href="https://www.instagram.com/lam.cis?utm_source=ig_web_button_share_sheet&igsh=MWttNnNvcTZsYmFhdw==" target="_blank" class="contact-link">
                        <i class="fab fa-instagram"></i> @lam.cis
                    </a>
                </div>

                <div class="contact-box">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <h3 class="contact-title">Τηλέφωνο</h3>
                    <p>Καλέστε μας για άμεση εξυπηρέτηση και πληροφορίες!</p>
                    <a href="tel:+306900000000" class="contact-link">
                        <i class="fas fa-phone"></i> +30 690 000 0000
                    </a>
                </div>
            </div>

            <div class="contact-form-section">
                <h3 class="form-title">✉️ Στείλτε μας μήνυμα</h3>
                <div id="formMessages" class="form-messages"></div>
                <form class="contact-form">
                    <div class="form-group">
                        <label for="name">Όνομα:</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="message">Μήνυμα:</label>
                        <textarea id="message" name="message" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="form-submit-btn" id="submitBtn">
                        <span class="btn-text">Αποστολή μηνύματος</span>
                        <span class="btn-spinner" style="display: none;">⏳ Αποστολή...</span>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 Lamcis. Όλα τα δικαιώματα διατηρούνται.</p>
            <div class="footer-social">
                <a href="mailto:info@lamcis.gr" class="footer-link">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="https://instagram.com/lamcis_candles" target="_blank" class="footer-link">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- JavaScript for contact form functionality -->
    <script>
        // EmailJS Configuration
        // TODO: Replace these with your actual EmailJS credentials
        const EMAILJS_CONFIG = {
            publicKey: 'YOUR_EMAILJS_PUBLIC_KEY',
            serviceId: 'YOUR_EMAILJS_SERVICE_ID',
            templateId: 'YOUR_EMAILJS_TEMPLATE_ID'
        };

        // Initialize EmailJS
        (function() {
            if (EMAILJS_CONFIG.publicKey !== 'YOUR_EMAILJS_PUBLIC_KEY') {
                emailjs.init({
                    publicKey: EMAILJS_CONFIG.publicKey,
                });
            }
        })();

        // Show message function
        function showMessage(text, type = 'success') {
            const messagesDiv = document.getElementById('formMessages');
            messagesDiv.innerHTML = `
                <div class="form-message ${type}">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-triangle'}"></i>
                    ${text}
                </div>
            `;
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                messagesDiv.innerHTML = '';
            }, 5000);
        }

        // Validate email format
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Send email notification using EmailJS
        async function sendEmailNotification(formData) {
            try {
                const templateParams = {
                    from_name: formData.name,
                    from_email: formData.email,
                    message: formData.message,
                    timestamp: formData.timestamp,
                    to_email: 'lefteristsegkos2@gmail.com' // Your email where you want to receive notifications
                };

                const result = await emailjs.send(
                    EMAILJS_CONFIG.serviceId,
                    EMAILJS_CONFIG.templateId,
                    templateParams
                );

                console.log('Email sent successfully:', result);
                return result;
            } catch (error) {
                console.error('Failed to send email:', error);
                // Don't show error to user as the message is still saved locally
                // You can optionally log this or handle it differently
                throw error;
            }
        }

        // Handle contact form submission
        document.querySelector('.contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const btnText = submitBtn.querySelector('.btn-text');
            const btnSpinner = submitBtn.querySelector('.btn-spinner');
            
            // Show loading state
            btnText.style.display = 'none';
            btnSpinner.style.display = 'inline';
            submitBtn.disabled = true;
            
            // Get form data
            const formData = {
                name: document.getElementById('name').value.trim(),
                email: document.getElementById('email').value.trim(),
                message: document.getElementById('message').value.trim(),
                timestamp: new Date().toLocaleString('el-GR'),
                id: Date.now() // Unique ID for each message
            };
            
            // Validate form data
            if (!formData.name) {
                showMessage('Παρακαλώ εισάγετε το όνομά σας!', 'error');
                resetButton();
                return;
            }
            
            if (!formData.email) {
                showMessage('Παρακαλώ εισάγετε το email σας!', 'error');
                resetButton();
                return;
            }
            
            if (!isValidEmail(formData.email)) {
                showMessage('Παρακαλώ εισάγετε έγκυρο email!', 'error');
                resetButton();
                return;
            }
            
            if (!formData.message) {
                showMessage('Παρακαλώ γράψτε το μήνυμά σας!', 'error');
                resetButton();
                return;
            }
            
            if (formData.message.length < 10) {
                showMessage('Το μήνυμα πρέπει να είναι τουλάχιστον 10 χαρακτήρες!', 'error');
                resetButton();
                return;
            }
            
            // Simulate processing delay
            setTimeout(async () => {
                try {
                    // Save to localStorage
                    let messages = JSON.parse(localStorage.getItem('contactMessages') || '[]');
                    messages.push(formData);
                    localStorage.setItem('contactMessages', JSON.stringify(messages));
                    
                    // Send email notification if EmailJS is configured
                    if (EMAILJS_CONFIG.publicKey !== 'YOUR_EMAILJS_PUBLIC_KEY') {
                        await sendEmailNotification(formData);
                    }
                    
                    // Show success message
                    showMessage(`Ευχαριστούμε ${formData.name}! Το μήνυμά σας στάλθηκε επιτυχώς. Θα επικοινωνήσουμε μαζί σας σύντομα στο ${formData.email}.`, 'success');
                    
                    // Reset form
                    this.reset();
                    
                } catch (error) {
                    showMessage('Προέκυψε σφάλμα. Παρακαλώ δοκιμάστε ξανά!', 'error');
                }
                
                resetButton();
            }, 1500);
            
            function resetButton() {
                btnText.style.display = 'inline';
                btnSpinner.style.display = 'none';
                submitBtn.disabled = false;
            }
        });

        // Real-time validation
        document.getElementById('email').addEventListener('blur', function() {
            if (this.value && !isValidEmail(this.value)) {
                this.style.borderColor = '#dc3545';
                showMessage('Μη έγκυρο email format!', 'error');
            } else {
                this.style.borderColor = '#ddd';
            }
        });

        // Clear error styling on focus
        ['name', 'email', 'message'].forEach(id => {
            document.getElementById(id).addEventListener('focus', function() {
                this.style.borderColor = '#c4829d';
                document.getElementById('formMessages').innerHTML = '';
            });
        });
    </script>
</body>
</html>